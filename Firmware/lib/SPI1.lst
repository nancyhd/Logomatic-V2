   1              		.file	"SPI1.c"
   9              	.Ltext0:
  10              		.align	2
  11              		.global	SPI1_Init
  13              	SPI1_Init:
  14              	.LFB2:
  15              		.file 1 "../lib/SPI1.c"
   1:../lib/SPI1.c **** /******************************************************************************
   2:../lib/SPI1.c **** *   SPI1.c - SPI driver for use on the LPC214x Family Microcontrollers
   3:../lib/SPI1.c **** *
   4:../lib/SPI1.c **** *  
   5:../lib/SPI1.c **** *
   6:../lib/SPI1.c **** *   History
   7:../lib/SPI1.c **** *   12/22/13 - NHD - First draft.
   8:../lib/SPI1.c **** ******************************************************************************/
   9:../lib/SPI1.c **** /*Includes*/
  10:../lib/SPI1.c **** #include "LPC214x.h"
  11:../lib/SPI1.c **** #include "SPI1.h"
  12:../lib/SPI1.c **** 
  13:../lib/SPI1.c **** /*Defines*/
  14:../lib/SPI1.c **** #define SSP_SELECT		2
  15:../lib/SPI1.c **** #define GPIO_SELECT		0
  16:../lib/SPI1.c **** #define P0_17_SHIFT		2
  17:../lib/SPI1.c **** #define P0_18_SHIFT 	4
  18:../lib/SPI1.c **** #define P0_19_SHIFT 	6
  19:../lib/SPI1.c **** 
  20:../lib/SPI1.c **** //SSPCR0 register settings
  21:../lib/SPI1.c **** #define SPI_8_BIT_FRAME 		7 
  22:../lib/SPI1.c **** #define SPI_FRAME_TYPE_OFFSET 	4
  23:../lib/SPI1.c **** #define SPI_FRAME_TYPE 			(0 << SPI_FRAME_TYPE_OFFSET)
  24:../lib/SPI1.c **** #define SPI_POLARITY_OFFSET		6
  25:../lib/SPI1.c **** #define SPI_POLARITY 			(0 << SPI_POLARITY_OFFSET)
  26:../lib/SPI1.c **** #define SPI_PHASE_OFFSET		7
  27:../lib/SPI1.c **** #define SPI_PHASE 				(0 << SPI_PHASE_OFFSET)
  28:../lib/SPI1.c **** #define SPI_PCLK_DIVIDER_OFFSET 8
  29:../lib/SPI1.c **** #define SPI_PCLK_DIVIDER 		(29 << SPI_PCLK_DIVIDER_OFFSET)
  30:../lib/SPI1.c **** 
  31:../lib/SPI1.c **** //SSPCR1 register settings
  32:../lib/SPI1.c **** #define SPI_ENABLE_OFFSET	 	1
  33:../lib/SPI1.c **** #define SPI_ENABLE 				(1 << SPI_ENABLE_OFFSET)
  34:../lib/SPI1.c **** 
  35:../lib/SPI1.c **** //SSPSR register fields
  36:../lib/SPI1.c **** #define SPI_BUSY				(1 << 4)
  37:../lib/SPI1.c **** 
  38:../lib/SPI1.c **** /*Macros*/
  39:../lib/SPI1.c **** #define configure_pin_mosi() 	PINSEL1 |= ((SSP_SELECT) << (P0_19_SHIFT))
  40:../lib/SPI1.c **** #define configure_pin_sck() 	PINSEL1 |= ((SSP_SELECT) << (P0_17_SHIFT))
  41:../lib/SPI1.c **** #define configure_pin_miso() 	PINSEL1 |= ((SSP_SELECT) << (P0_18_SHIFT))
  42:../lib/SPI1.c **** 
  43:../lib/SPI1.c **** 
  44:../lib/SPI1.c **** 
  45:../lib/SPI1.c **** void SPI1_Init(void)
  46:../lib/SPI1.c **** {
  16              	 Function supports interworking.
  17              		@ args = 0, pretend = 0, frame = 0
  18              		@ frame_needed = 0, uses_anonymous_args = 0
  19              		@ link register save eliminated.
  20              		.loc 1 48 0
  47:../lib/SPI1.c **** 
  48:../lib/SPI1.c **** 
  21              	r1, .L3
  22 0000 4C109FE5 		mov	r3, #2
  23 0004 0230A0E3 		str	r3, [r1, #16]
  24 0008 103081E5 		.loc 1 49 0
  49:../lib/SPI1.c **** _SELECT) << (P0_18_SHIFT))
  25              		r3, .L3+4
  26 000c 44309FE5 		str	r3, [r1, #0]
  27 0010 003081E5 		.loc 1 50 0
  50:../lib/SPI1.c **** (SSP_SELECT) << (P0_18_SHIFT))
  28              	v	r3, #0
  29 0014 0030A0E3 		str	r3, [r1, #4]
  30 0018 043081E5 		.loc 1 53 0
  51:../lib/SPI1.c **** (SSP_SELECT) << (P0_18_SHIFT))
  52:../lib/SPI1.c **** 
  53:../lib/SPI1.c **** 
  31              	r	r2, .L3+8
  32 001c 38209FE5 		ldr	r3, [r2, #4]
  33 0020 043092E5 		orr	r3, r3, #32
  34 0024 203083E3 		str	r3, [r2, #4]
  35 0028 043082E5 		.loc 1 54 0
  54:../lib/SPI1.c **** _SELECT) << (P0_18_SHIFT))
  36              	r3, [r2, #4]
  37 002c 043092E5 		orr	r3, r3, #8
  38 0030 083083E3 		str	r3, [r2, #4]
  39 0034 043082E5 		.loc 1 55 0
  55:../lib/SPI1.c **** (SSP_SELECT) << (P0_18_SHIFT))
  40              		r3, [r2, #4]
  41 0038 043092E5 		orr	r3, r3, #128
  42 003c 803083E3 		str	r3, [r2, #4]
  43 0040 043082E5 		.loc 1 58 0
  56:../lib/SPI1.c **** (SSP_SELECT) << (P0_18_SHIFT))
  57:../lib/SPI1.c **** 
  58:../lib/SPI1.c **** 
  44              		r3, [r1, #4]
  45 0044 043091E5 		orr	r3, r3, #2
  46 0048 023083E3 		.loc 1 46 0
  47              		@ lr needed for prologue
  48              		.loc 1 58 0
  49              		str	r3, [r1, #4]
  50 004c 043081E5 		.loc 1 59 0
  59:../lib/SPI1.c **** _SELECT) << (P0_18_SHIFT))
  51              	.L4:
  52 0050 1EFF2FE1 		.align	2
  53              	.L3:
  54              		.word	-536444928
  55              		.word	7431
  56 0054 008006E0 		.word	-536690688
  57 0058 071D0000 	.LFE2:
  59              		.align	2
  60              		.global	SPI1_Write
  62              	SPI1_Write:
  63              	.LFB3:
  64              		.loc 1 62 0
  65              		@ Function supports interworking.
  60:../lib/SPI1.c **** (SSP_SELECT) << (P0_18_SHIFT))
  61:../lib/SPI1.c **** 
  62:../lib/SPI1.c **** 
  66              	etend = 0, frame = 0
  67              		@ frame_needed = 0, uses_anonymous_args = 0
  68              		@ link register save eliminated.
  69              	.LVL0:
  70              		.loc 1 63 0
  71              		ldr	r3, .L11
  63:../lib/SPI1.c **** _SELECT) << (P0_18_SHIFT))
  72              	1 62 0
  73 0060 20309FE5 		and	r0, r0, #255
  74              		.loc 1 63 0
  75 0064 FF0000E2 		str	r0, [r3, #8]
  76              		.loc 1 62 0
  77 0068 080083E5 		@ lr needed for prologue
  78              	.L6:
  79              		.loc 1 64 0
  80              		ldr	r2, .L11
  64:../lib/SPI1.c **** (SSP_SELECT) << (P0_18_SHIFT))
  81              	[r2, #12]
  82 006c 14209FE5 		tst	r3, #16
  83 0070 0C3092E5 		bne	.L6
  84 0074 100013E3 		.loc 1 66 0
  85 0078 FBFFFF1A 		ldr	r0, [r2, #8]
  65:../lib/SPI1.c **** (SSP_SELECT) << (P0_18_SHIFT))
  66:../lib/SPI1.c **** 
  86              	:
  87 007c 080092E5 		and	r0, r0, #255
  88              		.loc 1 67 0
  89 0080 FF0000E2 		bx	lr
  67:../lib/SPI1.c **** SP_SELECT) << (P0_18_SHIFT))
  90              	:
  91 0084 1EFF2FE1 		.align	2
  92              	.L11:
  93              		.word	-536444928
  94              	.LFE3:
  96              		.align	2
  97              		.global	SPI1_Read
  99              	SPI1_Read:
 100              	.LFB4:
 101              		.loc 1 70 0
 102              		@ Function supports interworking.
  68:../lib/SPI1.c **** (SSP_SELECT) << (P0_18_SHIFT))
  69:../lib/SPI1.c **** 
  70:../lib/SPI1.c **** 
 103              	pretend = 0, frame = 0
 104              		@ frame_needed = 0, uses_anonymous_args = 0
 105              		str	lr, [sp, #-4]!
 106              	.LCFI0:
 107 008c 04E02DE5 		.loc 1 71 0
 108              		mov	r0, #0
  71:../lib/SPI1.c **** _SELECT) << (P0_18_SHIFT))
 109              	I1_Write
 110 0090 0000A0E3 		.loc 1 72 0
 111 0094 FEFFFFEB 		ldr	lr, [sp], #4
  72:../lib/SPI1.c **** (SSP_SELECT) << (P0_18_SHIFT))
 112              		lr
 113 0098 04E09DE4 	.LFE4:
 115              		.section	.debug_frame,"",%progbits
 116              	.Lframe0:
 163              	.Ldebug_loc0:
DEFINED SYMBOLS
                            *ABS*:00000000 SPI1.c
C:\Users\nancyhd\AppData\Local\Temp/ccmabaaa.s:13     .text:00000000 SPI1_Init
C:\Users\nancyhd\AppData\Local\Temp/ccmabaaa.s:22     .text:00000000 $a
C:\Users\nancyhd\AppData\Local\Temp/ccmabaaa.s:56     .text:00000054 $d
C:\Users\nancyhd\AppData\Local\Temp/ccmabaaa.s:64     .text:00000060 SPI1_Write
C:\Users\nancyhd\AppData\Local\Temp/ccmabaaa.s:73     .text:00000060 $a
C:\Users\nancyhd\AppData\Local\Temp/ccmabaaa.s:95     .text:00000088 $d
C:\Users\nancyhd\AppData\Local\Temp/ccmabaaa.s:101    .text:0000008c SPI1_Read
C:\Users\nancyhd\AppData\Local\Temp/ccmabaaa.s:107    .text:0000008c $a

NO UNDEFINED SYMBOLS
